# Solana 大涨背后：以太坊杀手隐现
来源：2023-12-25 20:25
https://foresightnews.pro/article/detail/49846

Solana 是一种快速、低延迟、权益证明的 Layer 1 公链，具有差异化的技术架构，在多个 Dapps 上的使用量不断增长。虽然目前基本的设计问题限制其弹性，中心化问题也很明显，但协议团队建议的复杂技术修复和升级可以减轻或解决这些问题。尽管如此，在过去 12 个月里，Solana 已成功从其他 Layer1 公链中脱颖而出，挑战以太坊作为加密货币领域智能合约宝座的地位。

Solana 独特的扩展方式与其他大多数 Layer1 公链形成鲜明对比 -- 理论吞吐量达到每秒 5 万笔交易，交易费用低廉且固定。从开发者的角度来看，Solana 在不依赖模块堆栈、Layer2 或分片的情况下实现可组合性，并以此为荣。本报告将对 Solana 进行深度评估，揭示其在 Layer1 公链领域占据和保持市场份额的有利条件。


## 技术总结
结合迄今为止描述的所有概念，下面是理论上 Solana 交易的生命周期概览：

1. 交易前：在开发过程中，Solana 智能合约开发人员会明确声明一个交易与之交互的所有账户列表 -- 这对于 Solana 通过 Sealevel 实现状态变化的并行化至关重要。

2. Dapp 将交易发送到用户钱包（如 Phantom）进行签名

3. 用户使用自己的私钥签署交易，支付 0.000005 SOL 的费用（这个数字目前是固定和确定的）

4. Dapp 使用 sendTransaction HTTP API 调用将用户签名的交易发送至 Solana RPC 服务器

5. RPC 服务器读取验证器日程（每 2 天更改一次），并将交易作为 UPC 数据包转发给当前和下一个验证器领导者

6. 领导验证器通过其交易处理单元（流水线）接收交易

有关这一过程的详细概述，请参阅以下文章。

## 1.背景与历史

### 1-1.创始人
Anatoly Yakovenko 在加利福尼亚州旧金山担任工程师期间创立了 Solana。他职业生涯的大部分时间都在高通公司（Qualcomm）度过，在那里，他利用自己的应用工程专业知识解决了硬件优化领域的挑战性问题。阿纳托利以其强大的技术头脑赢得了声誉 -- 他最值得一提的成就是设计了高性能 DSP 软件，该软件为 Google Tango（首款支持智能手机增强现实功能的移动设备）提供了高性能。2017 年，他通过一位致力于将深度学习硬件部署到云端的朋友第一次对加密货币产生兴趣（不出所料，这类专用硬件与 Solana 验证器节点有许多相似之处）。阿纳托利和他的朋友将利用这些功能强大的计算机来挖掘比特币，并在扣除初始资本支出后实现盈利。随着阿纳托利掉进研究工作量证明挖矿的兔子洞，他开始好奇为什么需要工作量证明，是什么导致工作量证明挖矿缓慢，以及如何改进工作量证明。

2017 年的一个晚上，阿纳托利探索了单线程挖矿，这就是众所周知的 「红色药丸」时刻。阿纳托利推断，与其测量「工作量证明」挖矿中不可或缺的电量，不如测量时间。阿纳托利坚信，将加密网络的安全性与电力或时间等物理常量联系起来，对于长期可靠性至关重要。在这种情况下，当阿纳托利意识到可以利用顺序哈希来保证两个事件之间需要一定的时间时，他顿悟了。阿纳托利后来将这一概念描述为「历史证明」（Proof-of-History），并于 2017 年 11 月在白皮书草案中发表这些发现。到 2018 年 2 月，阿纳托利与格雷格 - 菲茨杰拉德（Greg Fitzgerald）一起发布 Solana 测试网与官方白皮书。

阿纳托利的一位高通同事斯蒂芬 - 阿克里奇（Stephen Akridge）建议修改 Solana 的架构，利用 GPU 的并行化签名来实现验证。斯蒂芬的宝贵贡献既验证了阿纳托利最初协议设计的优点，也促使他全力以赴地投入到这个项目中。除了格雷格和斯蒂芬，阿纳托利还招募了拉吉 - 戈卡尔（Raj Gokal）和另外三位苹果公司 / 高通公司的资深专家，组建 Solana Labs。虽然该项目最初被命名为 Loom，但团队遭遇 Loom Ethereum L2 网络命名混乱的问题。团队最终决定更名为 Solana，以南加州 Solana 海滩（团队当时居住和工作的地方）命名

### 1-2.在熊市中成长
Solana Labs 成立于 2018 年初，由富有远见的创始人阿纳托利领导。Solana Labs 团队的使命是将 Solana 从 Proof-of-Concept 推向生产级、无许可公链。唯一的问题是，他们在 2018 年面临着艰难的筹资环境 --ICO 泡沫刚刚破裂。比特币价格一路暴跌，许多投资者对区块链 / 加密初创公司持冷淡态度。Solana Labs 联合创始人兼首席运营官拉吉 - 戈卡尔（Raj Gokal）在 FTX 的播客中描述道，当时，Solana 团队正努力在激烈的竞争中脱颖而出，Dfinity（现名为 ICP）刚刚融资 1 亿美元，而 Avalanche Labs 则是由康奈尔大学著名教授艾明 - 冈 - 西勒（Emin Gun Sirer）基于新颖的共识协议创立的。在一些人看来，Solana 不过是又一个专注于每秒交易量（TPS）等「虚荣指标」的 Layer 1 公链。当时，以 Twitter 为基础的「加密圈」更热衷于关注隐私和互操作性而非可扩展性的初创公司。幸运的是，阿纳托利说服了他在玩水下曲棍球时认识的一位朋友成为早期投资者，这位投资者随后将 Solana 团队介绍给另外两位支持者。

该团队通过向合格投资者提供私人代币销售，筹集到 2000 万美元资金。一些早期支持者包括 Multicoin Capital、500 Startups 和 Race Capital 的一位创始人。Solana 测试网络能够持续支持每秒 25 万笔的高频交易，给这些投资者留下了深刻印象。私募代币销售作为 A 轮融资于 2019 年底宣布。团队在筹集资金的同时，还建立了一个名为 Tour de SOL 的公共测试网（Solana 的大多数联合创始人都是自行车爱好者）。到 2020 年 3 月，Solana 在 CoinList 上进行了 176 万美元的公开代币拍卖，并推出主网测试版

## 2.技术架构
Solana 的区块链与纳斯达克速度

阿纳托利最初开发 Solana 时，借鉴了他个人对程序化电子交易的迷恋。作为访问盈透证券等流行平台 API 的普通最终用户，阿纳托利感到沮丧的是，他的交易被比他拥有更多资金和交易基础设施的中介机构进行了前置操作。他希望 Solana 的普通用户能享受与强大的机构公平竞争的环境。从长远来看，Solana 的目标是最终在公链上实现纳斯达克的规模和响应速度。事实上，Solana 公司早期的种子阶段投资方案中就有这样一句话：「Solana 的区块链和纳斯达克速度」。阿纳托利为 Solana 所做的设计决定强调的是速度和信息流，而不是比特币等其他区块链所关注的「价值存储」用例。

### 2-1.将 Solana 与其他绝大多数 Layer 1 公链区分开的关键因素是：
这三个关键属性共同构成 Solana 技术栈的基础支柱。
1. 硬件；
2. 「挂钟」时间的物理流逝；
3. 可组合性。

### 2-2.硬件
首先，也是最重要的一点是，Solana 公司非常依赖硬件方面的进步，以应对软件层面协议进步所带来的挑战，从而保证其速度和规模会随着硬件的不断改进而提高。
从大约五年前开始，仅适用于 CPU 晶体管密度的摩尔定律的进展已经放缓，但仍在不断进步。更重要的是，人工智能 / 机器学习领域正在推动 GPU/ 并行化处理能力取得新突破，而且在短期内没有放缓的迹象。
Solana 团队认为，软件层面的进展（如以太坊的 2.0 更新）已经臭名昭著，但由于只有一小部分人具备以安全方式实施协议级变更的技术深度，软件层面的进展可能会遇到障碍。无论他们在底层协议上取得多快的进展，Solana 团队都在赌计算机硬件行业将年复一年地向前发展。这就确保了 Solana 的底层可扩展性可以在其他条件相同的情况下，搭上硬件行业发展的顺风车。

这也使 Solana 公链有别于其他 Layer 1 公链，后者的扩展路线图主要依赖于软件设计的进步。

### 2-3.「挂钟」时间的物理流逝
Solana 技术架构的第二个基本概念是时间。Solana 将时间与状态更新共识解耦。由于 Solana 上的每笔交易都有时间戳，因此交易发生时可以实时流式传输。这种方法与大多数其他公链不同，后者是在每个区块的交易中分批处理时间戳。将时间从状态更新中分离出来的好处是，验证者可以对区块进行预处理，以提高吞吐量，因为其交易的排序遵循一个全局时钟。

尽管如此，值得注意的是，更广泛的公链开发 / 研究社区（除 Solana 之外）很少承认时间是扩展公链的有用的不变量。唯一一个将时间用于扩展分布式应用的显著例子出现在电信行业（鉴于 Solana 创始团队在电信行业的经验，这也是合情合理的）。具体来说，自 2G 时代以来， TDMA 一直是蜂窝网络的基础。TDMA 工作原理的细节不在本报告的讨论范围之内，但它可以归结为利用有限的资源（射频带宽），并将带宽切割成由全局时钟创建的时间段，从而在不需要更多网络资源的情况下满足更多设备的连接。如果没有这种关键的、基于时间的蜂窝网络扩展方法，今天就不会有无处不在的移动宽带。下面是 TDMA 工作原理的简化图。

### 2-3.可组合性
第三个关键概念是可组合性。可组合性是指 Solana 有意将其设计为单体公链。虽然 Solana 所走的单体化道路在他们看来被定位为杀手级功能，但在更广泛的加密货币领域，这种选择无疑是一种逆向的公链设计赌注。其他公链，如以太坊和 NEAR，将单体架构视为长期可扩展性的障碍。这些相互竞争的 Layer 1 公链正在探索各种解决方案，如模块化扩展（由以太坊中的 Celestia 和 Evmos 等项目推进）、Layer2 扩展（由以太坊中的 Starkware 和 Aztec 等项目推进）以及各种形式的分片（在以太坊的路线图上，目前已在 NEAR 协议中实施）。

这些技术方法之间的设计权衡值得在单独的研究报告中进行讨论。无论如何，Solana 都不愿偏离其单体架构的未来愿景。Solana 团队认为，优化可组合性的好处在于，在单体的全局状态上构建应用程序非常优雅。Solana 团队认为，在单体架构下，开发人员在编写需要 Solana 不同状态片段的智能合约时，不会因为多个分片或 Layer 2 系统而感到负担。具体来说，如果一个应用程序开发人员想在 NFT 平台的 SPL 令牌和 DeFi 应用程序的 SPL 令牌之间创建一个原子交换，由于 Solana 的全局状态，他们现在可以很容易地做到这一点。如果同一个开发者要为分片状态编写智能合约，他们可能需要添加额外的逻辑来检查交换的每一部分位于哪个分片上，这就增加了相关交易的复杂性。

随着区块链应用变得越来越复杂，彼此交织在一起，在模块化 / 或分片系统上构建的开发复杂性可能会成倍增加。从最终用户的角度来看，尽管 Layer1 是相同的公链，但基于一个 Layer2 协议构建的应用程序可能无法与基于另一个 Layer2 协议构建的应用程序实现本地互操作（例如基于 Optimism 或 Arbitrum 构建的两个独立应用程序，两者都是以太坊的第 2 层）。

Solana 非常重视终端用户体验，他们认为模块化 /Layer2/ 分片是「最后的手段」，而不是「必要的罪恶」。值得强调的是，Solana 的思路虽然用心良苦，但与当今几乎所有其他 Layer1 公链的路线图形成鲜明对比。对于大规模利用多个 Layer2 公链来说，用户体验会有多繁重，目前还没有定论。如今，大多数 Layer1 公链仍然是单体的，只有时间才能证明每个区块链的扩展方法在高使用率下的承受能力。Solana 已经对加密货币在非单体机制下的未来做出了一些合理的猜测，目前，他们致力于保持可组合的单体架构所带来的全局状态的简单性。


## 3.避开 EVM
以太坊虚拟机（EVM）是一个计算引擎，是以太坊智能合约的运行环境。开发人员使用 EVM 在以太坊上构建去中心化应用程序（DApps）。其目的是在无需许可的以太坊上管理「状态」。

许多其他 Layer1 公链和侧链（如 Avalanche、Binance Smart Chain、Harmony 和 Polygon 等）都将 EVM 兼容性作为核心功能。这是因为已经有很多在 EVM 上运行的 Dapp 用 Solidity 编写的代码，将这些代码移植到与 EVM 兼容的链上是一件相对简单的事情。这些与 EVM 兼容的备用 Layer1 还可以利用开发者方面（Hardhat、Truffle、Remix）和用户界面 / 用户体验方面（MetaMask、Coinbase Wallet）的现有工具。

另一方面，Solana 的设计初衷是在 LLVM 而不是 EVM 中运行。LLVM 是一个标准的编译器工具链，它将人类可读代码（如用 Rust 编写的代码）与汇编程序（可利用硬件优化的低级代码）分开。从实用角度看，可以想象基于 LLVM 的部署流程是源代码 ->LLVM->汇编。Solana 做出这种架构选择有两个关键原因。
1. Solana 设计为硬件优化，而 Solidity/EVM 本身并不支持硬件优化。
2. 像 Rust 这样的编程语言允许编写速度极快的底层代码，这种代码在开发者社区中被更广泛地采用，而且理论上更容易被有经验的开发者审核。根据 2020 年 Stack Overflow 开发人员调查，65000 多名开发人员连续第五年将 Rust 评为最受喜爱的编程语言（差距很大）。

然而，Solana 做出这一决定的代价是，了解 Rust 的区块链特定开发人员并不多，因此从相互竞争的加密公司 / 协议中招募新人才往往是一项困难的工作。不过，有些人认为这是一个积极的方面，因为 Solana 开发者社区性质上不那么「唯利是图」，而且由于其技能组合只对基于 Rust 的区块链项目有用，因此更加致力于 Solana 生态系统。

## 4.Solana 8 项核心创新的 「原因」

### 4-1.历史证明（POH）是共识前的时钟：
历史证明既不是共识协议，也不是女巫抵抗机制。相反，POH 是一种高频、可验证延迟函数（VDF）。VDF 是一种按顺序产生唯一输出函数，其验证速度远远快于其产生速度。换句话说，VDF 按顺序产生输出需要时间，但可以并行验证。在 Solana 的历史证明中，VDF 实际上是一个在恒定循环中运行的 SHA256 哈希函数。其工作原理是，最初向 SHA256 函数输入一个任意值（例如单词 Solana），然后将每次哈希的输出作为输入反馈回 SHA256，再次进行哈希处理。通过重复这一过程，我们可以确定产生最终输出所花费的时间是真实的，因为不可能并行生成每个都依赖于前一个哈希值的哈希值。这种按顺序哈希的数据结构使 Solana 能够有效地创建一个全局「挂钟」，Solana 公链上的所有交易都可以参考这个「挂钟」来证明这些交易发生的顺序。

简而言之，历史证明：

SHA256 在单个内核上尽可能快地循环，每个输出都是下一个输入。

Solana 网络对这一重复循环进行采样，并记录迭代次数和状态

信息可作为哈希值与状态一起插入 PoH 循环。这就保证了信息传递的顺序

### 4-2.Tower BFT 拜占庭容错：
Tower BFT 本质上是 Solana 的共识机制。它指的是 Solana 实现的实用拜占庭容错（PBFT）。作为回顾，拜占庭容错描述了解决拜占庭将军问题（Byzantine Generals Problem）的方法 -- 即在两个地理上分布的将军之间协调攻击的问题，而这两个将军只能通过信使进行通信。容错系统旨在防范坏人试图传播错误信息，或在「信使」到达目的地之前对其进行拦截。

### 4-3.在 Solana 系统中
Tower BFT 是对传统 BFT 系统的一种创新，验证者以某种方式对一个区块进行投票（我们称这种初始投票为 X），在随后的两个区块中，验证者将只对从「X」开始的区块进行投票。每当验证者投票支持一个源于「X」的区块时，这个「回滚超时」就会加倍。由于 PoH 的存在，每个验证者都可以验证区块中的信息，因此他们可以放弃与 Solana 历史不一致的区块。网络上的节点只有在最大投票锁定时间内才能获得通胀奖励。这有助于保证验证者的经济利益与他们认为网络中大多数人投票支持的分叉一致。

在 Tower BFT 中，活跃性（指始终添加新区块的能力）优先于一致性（指最终区块中潜在分叉的数量）（见图）。Tower BFT 与标准 PBFT 实现的不同之处在于，Tower BFT 在达成共识之前依赖 PoH 作为全局时钟。这使得 Solana 能够减少延迟和消息传递开销，而这正是传统 PBFT 常见缺陷。在 Tower BFT 下，验证者可以在哈希值或「时段」的固定时间段内进行投票。一般情况下，一个时段相当于 400 毫秒（不过随着硬件的不断进步，时隙也会发生变化）。如前所述，随后的每一个时段都会使网络必须停止以「展开」潜在投票而必须拖延的挂钟时间（也称为超时时间）加倍。

### 4-4.Gulf Stream 无内存池转发协议
在内存池中，未经确认的交易处于闲置状态，等待网络处理。在比特币或以太坊这样的内存池结构下，支付较高费用（或小费）的交易者可以激励网络矿工或验证者更快地确认其交易，并将其从内存池中移除。内存池的大小和交易获得区块链认可的成本都代表了特定区块链上区块空间的供求关系。

关于 Solana，试想一下，如果 Solana 验证器可以管理一个理论上有 10 万笔交易的「Mempool」（Solana 实际上并没有使用字面意义上的 Mempool）。在这些参数下，假设吞吐量为每秒 50,000 笔交易，Solana 验证器可以在数秒内清除这个内存池。然而，这种过度简化忽略了公链传播的重要性。在大多数公链中，mempool 交易是通过流言协议在节点网络中传播的。流言协议是指通过分布式节点网络传输数据的点对点通信方法。流言协议之所以运行良好，得益于 Bloom 过滤器等先进技术，这些技术用于帮助节点更高效地向其他节点传播交易。这种效率源于 bloom 过滤器利用哈希函数来识别一个元素是否不包含在给定的数据结构中（恒定时间）。然而，随着公链吞吐量的增加，由于每次实例化 bloom 过滤器时需要计算的哈希值数量庞大，运行 bloom 过滤器的计算成本可能会过于昂贵。因此，Solana 团队采用了与其他大多数公链截然不同的区块传播方式。

Gulf Stream 描述了 Solana 独特的交易传播方式，即把交易缓存和转发都推向网络边缘。由于验证者知道交易的顺序和未来的领导者是谁，因此他们可以提前执行交易。这样，作为领跑者的验证者就能更快地切换（类似于接力赛跑的田径运动员在队友传棒之前就开始跑自己的那一段）。使 Gulf Stream 技术成为可能的创新是已知的领跑者时间表（再次使用跑步的比喻，参加接力赛的团队会提前确定每个成员的跑步顺序）。这个领导者日程每隔一个时期（约 2 天）生成一次，这意味着交易将直接发送给当前和下一个领导者，而不是像以太坊 mempool 那样被随机传播。大多数公链都没有这种特定领导者原则。除了允许交易提前执行和促进无缝领导者切换外，这种方法还能减少验证者的内存负荷，因为他们不需要跟踪未确认的交易，并缩短了确认时间。Gulf Stream 的主要风险在于：1）增加验证者串通的风险（因为领导者是预先确定的，但 Solana 团队认为由于 Solana 的快速区块时间，这种风险微乎其微）；2）垃圾邮件倾向，因为 Gulf Stream 是无内存池的，垃圾邮件交易会直接发送给领导者。

### 4-5.Sealevel 并行智能合约
Sealevel 是一种虚拟机，允许在具有相同状态的区块链上同时执行智能合约。相比之下，与 EVM 兼容的公链是单线程的，一次只能有一个智能合约修改公链的状态。Sealevel 的智能合约并行执行引擎由其核心的验证器提供支持，使交易能够在具有相同状态的公链上同时执行。Sealevel 的工作原理类似于一种名为「分散 - 聚集」（scatter-gather）的操作系统技术。Solana 生态系统上的开发人员必须事先声明他们将读写的状态。虽然这增加了开发的复杂性，但也让 Solana 能够并行执行任何被认为不重叠的智能合约。Sealevel 最终使用伯克利包过滤器（Berkeley Packet Filters）将事务执行交给硬件级。通过利用 Sealevel 虚拟机，Solana 上仅读取相同状态的事务可以并发执行，非重叠事务也可以同时执行。

Turbine 区块传播协议：Turbine 的区块传播方式在很大程度上借鉴了 BitTorrent 等平台的原理。Turbine 的工作原理是将存储在区块中的数据分解成更小的数据包。当前区块的领导者将区块数据分成大小不超过 64kb 数据包，每个数据包发送给不同的验证器。验证器收到数据包后，会将该数据包传送给其他邻居。然后，这些邻居会将数据包传播给下面的邻居。此外，Turbine 还考虑到潜在的不诚实节点，它们可能会向邻近节点发送错误数据或不发送数据。为了解决这个问题，领导者会生成 Reed-Solomon 擦除码。擦除码允许每个验证器在未收到所有数据包的情况下重建整个数据块。如果引导者以擦除码发送 30% 的数据包，那么网络可以丢弃任何 30% 的数据包而不会丢失数据块。领导者也可根据网络状态调整这一比例。这些变化基于领导者从以前的数据块中观察到的数据包丢包率。

管道（用于验证优化的事务处理单元）： 管道化指的是硬件层面的优化，它使 Solana 能够将输入数据流分割成不同的进程，在不同的硬件上运行。管道化利用由 Rust 通道提供支持的消息队列来构建分为 3 个阶段的管道。

在第一阶段，数据被获取并发送到内核（操作系统）级别的区块。具体来说，内核空间会将发送到下一个 GPU 阶段的数据传递出去，在 GPU 阶段，签名能够被并行验证。一旦签名得到验证，GPU 就会将数据移交给 CPU，进入下一个银行业务阶段。与此同时，内核空间已经获取了下一组数据，并将从中央处理器获取要写入公链的数据，然后将其发送到其他区块。

有一个类比可以帮助解释这一概念，那就是洗碗。通常，洗碗分为多个阶段：冲洗、消毒、烘干、储存。第一个人将负责冲洗脏盘子并存放干净、干燥的盘子，而不是由一个人按顺序完成每个步骤。不过，他们会把餐具交给另一个人，后者只负责消毒。也许这个人还可以用一个装满干净肥皂水的盆子同时给许多碗碟打肥皂 / 消毒。(这是 GPU 并行化的一个粗略类比)。最后，第三个人将专注于晾干这些餐具，并将洗完的餐具交还给第一个人，由他将餐具存放在应该放置的地方。
### 4-6.Cloudbreak 横向扩展账户数据库
Cloudbreak 使 Solana 能够在硬件层面利用并发读写。Solana 没有依赖传统数据库来实现这一目标（这是非常困难的），而是借鉴操作系统的原理，建立了一种不同类型的数据库。从架构上讲，Cloudbreak 处理账户数据的方式如下：
* 账户和分叉索引存储在 RAM 中
* 账户采用内存映射
* 每个内存映射存储来自单个提议分叉的账户
* 映射随机分布在固态硬盘上
* 利用写入时复制语义
* 将写入添加到同一分叉的随机内存映射中
* 每次写入完成后更新索引

Solana 团队不得不从头开始构建所有查询和数据操作工具，而不是依赖通用数据库抽象。因此，Solana 网络才能通过在固态硬盘上横向扩展的顺序读取，为给定的分叉计算状态更新的默克尔根。即使当 Solana 的账户数超过 1000 万（这将导致数据量过大，无法完全存储在 RAM 中），Cloudbreak 仍可在单个固态硬盘上支持每秒 100 万次读写。
### 4-7.存档器分布式分类账存储
存档器最好被视为不下载 Solana 全部分类账的轻型客户端。这一点非常重要，因为 Solana 每年会产生约 4 PB 的数据，只有具有大型存储规格的大型验证器才能存储所有这些数据。存档器让更多节点都能存储 Solana 的历史数据，有助于降低集中化风险。从本质上讲，存档器与验证交易的验证器相同，它们也会下载 Solana 的部分分类账，并向更广泛的验证器集提供复制证明（ProReps），以确定它们没有恶意行为。

## 5.Solana 的实际性能
如果不考虑可能导致与其他公链进行「同类比较」无效的因素，就无法对 Solana 作为可扩展公链的性能进行客观评估。

例如，Solana 的白皮书声称理论上每秒可完成 71 万笔交易。然而，在撰写本文时，Solana 的网站显示，在过去 6 个小时里，平均每秒交易量约为 1,500 次（TPS）。由此可见，Solana 的理想未来与当前现实之间存在着约 500 倍的差距。将 Solana 自己报告的 TPS 看作表面价值是有问题的，因为它将内部共识信息算作交易，这不是任何其他公链的标准做法。在 Solana 中，共识信息被称为「投票交易」-- 它们是拥有投票账户的验证者，处理投票登记、投票收集和新投票签署。在 Solana 上，涉及 Dapp 智能合约交互的交易被称为「非投票」交易（大多数其他公链只将「非投票」交易计入其 TPS 数量）。根据 Dune Analytics 的数据，在 2022 年 3 月 2 日至 2022 年 4 月 3 日期间，投票交易占 Solana 所有交易的 80-90%。因此，从 Solana 报告的约 1,500 tps 指标中减去「共识开销」后，得出的真实 TPS 为每秒约 300 次非投票交易（尽管这是一个不断变化的目标）。

根据 Dragonfly Capital 的研究，Solana 的真正可扩展性能比竞争对手的 Layer 1 要高出 10-25 倍，但如果按照表面价值来衡量 Solana 的报告指标，就不会像经常报道的那样高出 100 倍或 1000 倍。Dragonfly 的方法是通过在测试网络上使用完全打包的区块进行 AMM 交易，从而使每个网络的公链性能正常化。虽然这并不是一个完美的衡量标准，但肯定比各种 Layer 1 公链所宣称的更能进行同类之间的比较。虽然 Solana 基于这些基准的实际性能（每秒约 272 次 Orca 交换）与其白皮书中提到的 71 万 TPS 理论性能相比相形见绌，但与其他协议（如以太坊的 12-15TPS 限制）相比，这仍然是一个令人难以置信的数字。从可扩展性角度来看，这也凸显了 Solana 技术似乎是同类产品中的佼佼者（就目前而言）。尽管如此，其他非 EVM 公链（如 NEAR）也有可能实现较高的「实际吞吐量」。


## 6.中断：Solana 的生存风险
Solana 最大的诟病之一就是它的中断历史。追溯到 2021 年 9 月，Solana 已经经历了 12 天的部分或完全中断。这相当于在 2021 年 9 月至 2022 年 5 月（含）的所有天数中，约有 4.44% 的天数网络性能下降或停止。虽然每次中断的情况各不相同，但导致这些中断的主要因素可归结为同一个核心问题：垃圾邮件。Solana 的固定收费架构在有足够强大的经济动机促使行为者向网络发送垃圾邮件时，就会刺激垃圾邮件的产生。无论这种经济激励的形式是在 Raydium IDO 期间捕获 Grape Protocol 的代币，还是最近通过 Metaplex 的 Candy Machine 计划铸造 NFT，垃圾邮件发送者有时会完全淹没 Solana 网络。

这些由垃圾邮件导致的 Solana 网络故障凸显了一个更大的问题，这个问题自互联网诞生以来就一直困扰着互联网本身。通过 Polynya 首次提出的「交易质量」框架，也许可以更好地研究打击垃圾邮件交易的问题。与区块链的可扩展性三难框架类似，交易质量三难框架认为，区块链的交易必须在以下两个属性中做出选择：减少垃圾邮件、抵制审查和低费用。在没有区块链的 Web2 世界中，通常会牺牲抗审查能力来对抗垃圾邮件和费用。在区块链世界中，比特币和以太坊都采用收费市场和内存池来防止垃圾邮件，同时保留其去中心化网络（抗审查）。而 Solana 则以低费用和相对去中心化的网络为基础，优先考虑良好的用户体验。因此，交易质量三难框架正确地表明，Solana 公司是在用垃圾邮件的倾向为其低收费和去中心化付出代价。由于 Solana 独特的技术架构选择，Solana 网络上的垃圾邮件水平也是独一无二的，在任何其他流行的 Layer1 公链上都看不到。